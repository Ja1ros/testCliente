{"ast":null,"code":"import { UsuariosService } from \"app/Services/usuarios.service\";\nimport { ToastrService } from \"ngx-toastr\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/Services/usuarios.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/forms\";\nexport let MiPerfilComponent = /*#__PURE__*/(() => {\n  class MiPerfilComponent {\n    constructor(userService, toastr) {\n      this.userService = userService;\n      this.toastr = toastr;\n      this.listaFrases = [\"El único modo de hacer un gran trabajo es amar lo que haces - Steve Jobs\", \"El dinero no es la clave del éxito; la libertad para poder crear lo es - Nelson Mandela\", \"Cuanto más duramente trabajo, más suerte tengo - Gary Player\", \"La inteligencia consiste no sólo en el conocimiento, sino también en la destreza de aplicar los conocimientos en la práctica - Aristóteles\", \"El trabajo duro hace que desaparezcan las arrugas de la mente y el espíritu - Helena Rubinstein \", \"Cuando algo es lo suficientemente importante, lo haces incluso si las probabilidades de que salga bien no te acompañan - Elon Musk\", \"Escoge un trabajo que te guste, y nunca tendrás que trabajar ni un solo día de tu vida - Confucio\", \"A veces la adversidad es lo que necesitas encarar para ser exitoso - Zig Ziglar\", \"La lógica te llevará de la a a la z. la imaginación te llevará a cualquier lugar - Albert Einstein\", \"Para tener éxito tu deseo de alcanzarlo debe ser mayor que tu miedo al fracaso - Bill Cosby\"];\n      this.frase = \"\";\n      this.usuario = {\n        id: 0,\n        cedula: \"\",\n        username: \"\",\n        password: \"\",\n        nombres: \"\",\n        estado: 1\n      };\n    }\n\n    ngOnInit() {\n      this.user = JSON.parse(localStorage.getItem(\"miperfil\"));\n      console.log(this.user);\n      this.usuario.id = this.user.id;\n      this.usuario.username = this.user.userName;\n      this.usuario.nombres = this.user.Nombres;\n      this.usuario.cedula = this.user.Cedula;\n      this.usuario.rol = this.user.RollName;\n      let num = Math.floor(Math.random() * (9 - 0));\n      this.frase = this.listaFrases[num];\n      console.log(this.usuario);\n    }\n\n    editarPerfil() {\n      // if (!this.validarUsuario()) {\n      //   return;\n      // }\n      this.userService.putUsuarios(this.usuario).subscribe(data => {\n        if (data.status == 200) {\n          this.showNotification(\"top\", \"center\", 2, data.msg);\n          console.log(this.usuario);\n          this.user.id = this.usuario.id;\n          this.user.userName = this.usuario.username;\n          this.user.Nombres = this.usuario.nombres;\n          this.user.Cedula = this.usuario.cedula;\n          this.user.RollName = this.usuario.rol;\n          localStorage.setItem(\"miperfil\", JSON.stringify(this.user));\n        }\n      }, err => {\n        if (err[\"error\"].errors != undefined) {\n          let msg = \"\";\n          let cant = err[\"error\"].errors.length;\n\n          for (let index = 0; index < cant; index++) {\n            const element = err[\"error\"].errors[index];\n\n            if (index + 1 == cant) {\n              msg += element.msg;\n            } else {\n              msg += element.msg + \", \";\n            }\n          }\n\n          this.showNotification(\"top\", \"center\", 4, msg);\n        } else {\n          let er = err[\"error\"];\n          this.showNotification(\"top\", \"center\", 4, er.msg);\n        }\n      });\n    }\n\n    validarUsuario() {\n      if (this.usuario.cedula.length < 10) {\n        this.showNotification(\"top\", \"center\", 3, \"La Cédula debe tener 10 dígitos\");\n        return false;\n      }\n\n      if (!this.validarCed(this.usuario.cedula.trim())) {\n        this.showNotification(\"top\", \"center\", 3, \"La Cédula no es válida\");\n        return false;\n      }\n\n      if (this.usuario.nombres.length < 3) {\n        this.showNotification(\"top\", \"center\", 3, \"El nombre debe más de 3 dígitos\");\n        return false;\n      }\n\n      if (this.usuario.password.length < 6) {\n        this.showNotification(\"top\", \"center\", 3, \"La Contraseña debe más de 6 dígitos\");\n        return false;\n      }\n\n      let regex = /^(?!.*\\s)(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[~`!@#$%^&*()--+={}\\[\\]|\\\\:;\"'<>,.?/_₹]).{8,16}$/;\n\n      if (!regex.test(this.usuario.password)) {\n        this.showNotification(\"top\", \"center\", 3, \"La Contraseña no cumple los requisitos, una letra minuscula, mayuscula, numeros, caracteres especiales y minumo 8\");\n        return false;\n      }\n\n      if (this.usuario.username.length < 4) {\n        this.showNotification(\"top\", \"center\", 3, \"Debe ingresar un usuario\");\n        return false;\n      }\n\n      return true;\n    }\n\n    showNotification(from, align, color, message) {\n      switch (color) {\n        case 1:\n          this.toastr.info(`<span data-notify=\"icon\" class=\"nc-icon nc-bell-55\"></span><span data-notify=\"message\"> ${message}</span>`, \"\", {\n            timeOut: 4000,\n            closeButton: true,\n            enableHtml: true,\n            toastClass: \"alert alert-info alert-with-icon\",\n            positionClass: \"toast-\" + from + \"-\" + align\n          });\n          break;\n\n        case 2:\n          this.toastr.success(`<span data-notify=\"icon\" class=\"nc-icon nc-bell-55\"></span><span data-notify=\"message\">${message}</span>`, \"\", {\n            timeOut: 4000,\n            closeButton: true,\n            enableHtml: true,\n            toastClass: \"alert alert-success alert-with-icon\",\n            positionClass: \"toast-\" + from + \"-\" + align\n          });\n          break;\n\n        case 3:\n          this.toastr.warning(`<span data-notify=\"icon\" class=\"nc-icon nc-bell-55\"></span><span data-notify=\"message\"> ${message}</span>`, \"\", {\n            timeOut: 4000,\n            closeButton: true,\n            enableHtml: true,\n            toastClass: \"alert alert-warning alert-with-icon\",\n            positionClass: \"toast-\" + from + \"-\" + align\n          });\n          break;\n\n        case 4:\n          this.toastr.error(`<span data-notify=\"icon\" class=\"nc-icon nc-bell-55\"></span><span data-notify=\"message\"> ${message}</span>`, \"\", {\n            timeOut: 4000,\n            enableHtml: true,\n            closeButton: true,\n            toastClass: \"alert alert-danger alert-with-icon\",\n            positionClass: \"toast-\" + from + \"-\" + align\n          });\n          break;\n\n        case 5:\n          this.toastr.show(`<span data-notify=\"icon\" class=\"nc-icon nc-bell-55\"></span><span data-notify=\"message\"> ${message}</span>`, \"\", {\n            timeOut: 4000,\n            closeButton: true,\n            enableHtml: true,\n            toastClass: \"alert alert-primary alert-with-icon\",\n            positionClass: \"toast-\" + from + \"-\" + align\n          });\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    validarCed(ced) {\n      var cad = ced;\n      var total = 0;\n      var longitud = cad.length;\n      var longcheck = longitud - 1;\n\n      if (cad !== \"\" && longitud === 10) {\n        for (let i = 0; i < longcheck; i++) {\n          if (i % 2 === 0) {\n            var aux = cad.charAt(i) * 2;\n            if (aux > 9) aux -= 9;\n            total += aux;\n          } else {\n            total += parseInt(cad.charAt(i));\n          }\n        }\n\n        total = total % 10 ? 10 - total % 10 : 0;\n\n        if (cad.charAt(longitud - 1) == total) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n\n  }\n\n  MiPerfilComponent.ɵfac = function MiPerfilComponent_Factory(t) {\n    return new (t || MiPerfilComponent)(i0.ɵɵdirectiveInject(i1.UsuariosService), i0.ɵɵdirectiveInject(i2.ToastrService));\n  };\n\n  MiPerfilComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MiPerfilComponent,\n    selectors: [[\"app-mi-perfil\"]],\n    decls: 52,\n    vars: 8,\n    consts: [[1, \"row\"], [1, \"col-md-4\"], [1, \"card\", \"card-user\"], [1, \"image\"], [\"src\", \"assets/img/damir-bosnjak.jpg\", \"alt\", \"...\"], [1, \"card-body\"], [1, \"author\"], [\"href\", \"#\"], [\"src\", \"assets/img/mike.png\", \"alt\", \"...\", 1, \"avatar\", \"border-gray\"], [1, \"title\"], [1, \"description\"], [1, \"description\", \"text-center\"], [1, \"col-md-8\"], [1, \"card-header\"], [1, \"card-title\"], [1, \"col-md-5\", \"pr-1\"], [1, \"form-group\"], [\"name\", \"txtUsuario\", \"disabled\", \"\", \"onkeypress\", \"return event.charCode >= 48\", \"min\", \"1\", \"id\", \"txtUsuario\", \"type\", \"text\", \"maxlength\", \"10\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-5\", \"px-1\"], [\"type\", \"password\", \"placeholder\", \"*******\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-2\", \"px-1\"], [\"disabled\", \"\", \"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-6\", \"pr-1\"], [\"name\", \"txtCed\", \"onkeypress\", \"return event.charCode >= 48\", \"min\", \"1\", \"id\", \"txtCed\", \"oninput\", \"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);\", \"type\", \"text\", \"maxlength\", \"10\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-6\", \"px-1\"], [\"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"update\", \"ml-auto\", \"mr-auto\"], [1, \"btn\", \"btn-primary\", \"btn-round\", 3, \"click\"]],\n    template: function MiPerfilComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵelement(4, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5)(6, \"div\", 6)(7, \"a\", 7);\n        i0.ɵɵelement(8, \"img\", 8);\n        i0.ɵɵelementStart(9, \"h5\", 9);\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"p\", 10);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"p\", 11);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(15, \"div\", 12)(16, \"div\", 2)(17, \"div\", 13)(18, \"h5\", 14);\n        i0.ɵɵtext(19, \"Editar Perfil\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 5)(21, \"div\", 0)(22, \"div\", 15)(23, \"div\", 16)(24, \"label\");\n        i0.ɵɵtext(25, \"Usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"input\", 17);\n        i0.ɵɵlistener(\"ngModelChange\", function MiPerfilComponent_Template_input_ngModelChange_26_listener($event) {\n          return ctx.usuario.username = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"div\", 18)(28, \"div\", 16)(29, \"label\");\n        i0.ɵɵtext(30, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"input\", 19);\n        i0.ɵɵlistener(\"ngModelChange\", function MiPerfilComponent_Template_input_ngModelChange_31_listener($event) {\n          return ctx.usuario.password = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"div\", 20)(33, \"div\", 16)(34, \"label\");\n        i0.ɵɵtext(35, \"Rol\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"input\", 21);\n        i0.ɵɵlistener(\"ngModelChange\", function MiPerfilComponent_Template_input_ngModelChange_36_listener($event) {\n          return ctx.usuario.rol = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(37, \"div\", 0)(38, \"div\", 22)(39, \"div\", 16)(40, \"label\");\n        i0.ɵɵtext(41, \"C\\u00E9dula\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"input\", 23);\n        i0.ɵɵlistener(\"ngModelChange\", function MiPerfilComponent_Template_input_ngModelChange_42_listener($event) {\n          return ctx.usuario.cedula = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(43, \"div\", 24)(44, \"div\", 16)(45, \"label\");\n        i0.ɵɵtext(46, \"Nombres\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"input\", 25);\n        i0.ɵɵlistener(\"ngModelChange\", function MiPerfilComponent_Template_input_ngModelChange_47_listener($event) {\n          return ctx.usuario.nombres = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(48, \"div\", 0)(49, \"div\", 26)(50, \"button\", 27);\n        i0.ɵɵlistener(\"click\", function MiPerfilComponent_Template_button_click_50_listener() {\n          return ctx.editarPerfil();\n        });\n        i0.ɵɵtext(51, \" Editar Perfil \");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate(ctx.usuario.nombres);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"@\", ctx.usuario.username, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\\\"\", ctx.frase, \"\\\"\");\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.username);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.password);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.rol);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.cedula);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.nombres);\n      }\n    },\n    dependencies: [i3.DefaultValueAccessor, i3.NgControlStatus, i3.MaxLengthValidator, i3.NgModel]\n  });\n  return MiPerfilComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}